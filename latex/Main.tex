\documentclass{article}

\usepackage[style=alphabetic]{biblatex}
\addbibresource{refs.bib}

\usepackage{comment}

\setlength{\marginparwidth}{2cm} % remove when done

\usepackage{todonotes}
\usepackage{xcolor}
\usepackage[hidelinks]{hyperref}

%\hypersetup{
%    colorlinks=true,
%    linkcolor=cyan
%    }

\usepackage{catchfilebetweentags}
\usepackage{quiver} 
\usepackage{tabularx}
\usepackage{amsthm}


\theoremstyle{plain}% default
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{prop}[theorem]{Proposition}
\newtheorem*{cor}{Corollary}

\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem{remark}{Remark}[section]
\newtheorem{claim}{Claim}[section]

\renewcommand{\partautorefname}{Part}%
\renewcommand{\sectionautorefname}{Section}%
\renewcommand{\subsectionautorefname}{Subsection}%

\providecommand{\theoremautorefname}{Theorem}%
\providecommand{\lemmaautorefname}{Lemma}%
\providecommand{\propautorefname}{Proposition}%
\providecommand{\corautorefname}{Corollary}%

\providecommand{\defnautorefname}{Definition}%
\providecommand{\remarkautorefname}{Remark}%
\providecommand{\claimautorefname}{Claim}%


\usepackage[links]{agda}
\AgdaNoSpaceAroundCode{}

% from: https://agda.readthedocs.io/en/v2.6.3/_downloads/59877ce886494c991a213f09e29b712c/article-luaxelatex-different-fonts.lagda.tex
\usepackage{fontspec}

\usepackage{luaotfload}
\directlua{luaotfload.add_fallback
  ("mycustomfallback",
    { "JuliaMono:style=Regular;"
    , "NotoSansMono:style=Regular;"
    , "NotoSansMath:style=Regular;"
    }
  )}
\defaultfontfeatures{RawFeature={fallback=mycustomfallback}}

\newfontfamily{\AgdaSerifFont}{Linux Libertine O}
\newfontfamily{\AgdaSansSerifFont}{Linux Biolinum O}
\newfontfamily{\AgdaTypewriterFont}{inconsolata}
\renewcommand{\AgdaFontStyle}[1]{{\AgdaSansSerifFont{}#1}}
\renewcommand{\AgdaKeywordFontStyle}[1]{{\AgdaSansSerifFont{}#1}}
\renewcommand{\AgdaStringFontStyle}[1]{{\AgdaTypewriterFont{}#1}}
\renewcommand{\AgdaCommentFontStyle}[1]{{\AgdaTypewriterFont{}#1}}
\renewcommand{\AgdaBoundFontStyle}[1]{\textit{\AgdaSerifFont{}#1}}

\newcommand{\towrite}[1]{\par\textcolor{blue}{Write here about: ``#1''}\par}
\newcommand{\toremove}[1]{\textcolor{red}{This is going to be (re)moved: ``#1''}}


% macros
\newcommand{\investigate}[1]{\par\vspace{1\baselineskip}\textcolor{gray}{\textit{#1}}\vspace{1\baselineskip}\par}

% symbols
\newcommand{\bN}{\AgdaDatatype{â„•}}
\newcommand{\bL}{\AgdaDatatype{Leibniz}}


\title{Generic Proofs and Constructions in Agda}
\author{Samuel Klumpers\\6057314}

% previous (provisional) titles:
% Restoring (part of) the friendship between recursion schemes and without-K (provisional)
% The gentle art of smashing things to bits and pieces
% Running in circles in Agda

\begin{document}
\maketitle
\tableofcontents

%This document is generated from a literate agda file!
\newpage

\begin{comment}
\begin{abstract} %provisional
    This thesis introduces the concepts of the structure identity principle, numerical representations, and ornamentations, and aims to combine these to simplify the presentation and verification of finger trees, demonstrating the generalizability and improved compactness and security of the resulting code. 
\end{abstract}
\end{comment}

\part{Proposal}
\section{Outline}
In this document I propose a master thesis project, which will investigate and attempt to counter the obstacles one can encounter when replacing one datastructure with a more complicated one, while keeping the end-result verifiable.

\autoref{sec:intro} describes some challenges that can arise when replacing structures, along with known ways to tackle them.

\autoref{sec:research-question} lists some remaining and new questions regarding this kind of replacement, and proposes methods and ideas to tackle and answer the open challenges and questions.

\autoref{sec:resources} lists literature and frameworks relevant to these questions.

\autoref{sec:planning} proposes a planning for the described project.

\autoref{part:preliminary} summarizes and contains the preliminary work done for this project.

\section{Program Vivisection}\label{sec:intro}
\input{Introduction}

\section{Research Question and Contributions}\label{sec:research-question}
The research question of this project will be: \textit{can we describe finger trees \cite{fingertrees} in the frameworks of numerical representations and ornamentation \cite{progorn}, simplifying the verification of their properties as flexible two-sided arrays?} We expect to encounter a variety of obstacles along the way, and so the project will focus on finding existing or developing new theory to deal with these. For example, an obstacle can be that the corresponding number system has many representations for the same number, which we expect to describe using quotients \cite{cuagda} and reason about using representation independence \cite{iri}. If this is accomplished or deemed infeasible at an early stage, we can generalize the results we have to other related problems; for example, we may view the problem of generating arbitrary values for testing as an instance of an enumeration problem, but then through the lens of ornaments.


\section{Related work}\label{sec:resources}
\towrite{Organize this into a human text}

\begin{tabularx}{\textwidth}{l | X}
    \cite{iri}      & Equivalences from relations, transport over structures \\ 
    \hline 
    \cite{calcdata} & Prototyping datatypes with properties deriving from the underlying numbers, enjoy the definitional equalities of representables at the inductive types \\  
    \hline 
    \cite{progorn}  & Using simple types as stepping stones to more impressive types, generalization of numerical representations? Are ``ornament-computing functions'' powerful, or are they nice party-tricks and is heterogeneization a coincidence? \\  
    \hline 
    \cite{purelyfunctional}   & Not so much work in the same direction, but definitely a source of inspiration, and a good reference for which datastructure is good at what \\
    \hline 
    \cite{hetbin}        & A predecessor/inspiration for heterogeneization \\
    \hline 
    \cite{glookup}       & Perhaps an inspiration to do more with the numerical representations/ornaments experiment \\
    \hline 
    \cite{orntrans}      & How many functions do we keep when we turn our naturals into lists or vectors? \\
    \hline 
    \cite{hsip}          & Can we push SIP to eat indexed structures? (I still have to attempt to digest this) \\
    \hline 
    \cite{practgen}      & Source of inspiration for some generic constructions (and perhaps a list of things we don't need to try again) \\
    \hline 
    \cite{tgalois}  & It claims to achieve what univalence does, without the Cubical/HoTT overhead? (Haven't fully read, even if it doesn't do what this makes me think it does, it references a wealth of other papers that might) \\
    \hline 
    \cite{coveringbases} & Inspiration/application for enumeration \\
    \hline 
    \cite{recschemes} & Like mapFold, but more probably \\
    %\hline 
    %InitFinal?    & The least fixpoint of $X \mapsto \top + A \times X$ is a list, the largest is a stream. What happens in between the two? (This might not be relevant at all) \\
    \hline 
    \cite{amortcoind}    & Could we derive the amortized bounds on (our or Ralf's) fingertrees using this? (Not sure if I want to...)
\end{tabularx}


\section{Planning}\label{sec:planning}
\towrite{This will be done}


\part{Preliminary work}\label{part:preliminary}
\towrite{This has been done}

\section{Proof Transport via the Structure Identity Principle}\label{sec:leibniz}
\input{CubicalAndBinary}

\section{Types from Specifications: Ornamentation and Calculation}\label{sec:numrep}
\input{TypeGeneration}

\section{More equivalences for less effort}\label{sec:userfriendly}
\input{UserFriendly}

\begin{comment}
\section{FingerTrees}\label{sec:fingertrees}
Fingertrees are often (rightfully so) referred to as ``the fastest persistent datastructure for most purposes'', but while simpler than implementations achieving the same bounds, they are still challenging to reason about; in this section, we will investigate how we can fit the description and analysis of fingertrees, or variants upon them, into the frameworks of calculating datastructures and ornamental programming.

We compare the work in calculating datastructures to solving associativity equations in groups by shifting to the Cayley representation, such as in [..]


%\section{Discussion and Future Work}\label{sec:discussion}


\newpage
\section{Temporary}\label{sec:temp}
\listoftodos
%\subfile{Scratch.tex}
\end{comment}




\printbibliography
\end{document}
